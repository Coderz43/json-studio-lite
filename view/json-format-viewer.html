<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>JSON Studio Lite ‚Äî JSON Format Viewer</title>
  <meta name="description" content="Pretty-print and inspect JSON side-by-side with numbering, dark mode, and quick actions." />
  <link rel="icon" href="../assets/favicon.ico" />
  <link rel="manifest" href="../manifest.webmanifest" />
  <link rel="preload" href="../assets/styles.css" as="style">
  <link rel="stylesheet" href="../assets/styles.css">
  <link rel="stylesheet" href="../styles/theme.css">

  <style>
  /* ===== Shared local vars (match Difference) ===== */
  :root{
    --line-active:#fff4b3;
    --pane-border:#d7dbe3;
    --pane-toolbar:#e6e9ef;
    --pane-bg:#ffffff;
    --btn-gradient: linear-gradient(90deg,#ff7e29,#3a8dff); /* for the center CTA only */
    --btn-text:#fff;
  }
  html[data-theme="dark"]{
    --pane-border:#1b2030;
    --pane-toolbar:#1e2430;
    --pane-bg:#141927;
    --line-active:#23293a;
    --btn-gradient: linear-gradient(90deg,#ff7e29,#3a8dff);
    --btn-text:#fff;
  }
.brand .logo-skeleton,
.brand .brand-name { display:none; }

.brand-logo{ height:32px; display:block }
@media (min-width:1024px){ .brand-logo{ height:36px } }

  /* Ace dark skin tweak so editor blends with pane */
  html[data-theme="dark"] .ace-monokai{
    background-color:#141927 !important; color:#e6edf3 !important;
  }
  html[data-theme="dark"] .ace-monokai .ace_text-layer{ color:#e6edf3 !important; }
  html[data-theme="dark"] .ace-monokai .ace_gutter{
    background:#141927 !important; color:#8b93a6 !important; border-right:1px solid #1b2030 !important;
  }
  html[data-theme="dark"] .ace-monokai .ace_print-margin{ background:#141927 !important; }
  html[data-theme="dark"] .ace-monokai .ace_cursor{ color:#e6edf3 !important; }
  html[data-theme="dark"] .ace-monokai .ace_marker-layer .ace_selection{ background:#2b3550 !important; }

  /* ===== Layout ===== */
  .convert-grid{ display:grid; grid-template-columns:1fr 220px 1fr; gap:16px; align-items:stretch; }
  .convert-center{ display:flex; flex-direction:column; align-items:center; justify-content:center; gap:14px; min-height:560px; }
  @media (max-width:980px){ .convert-grid{ grid-template-columns:1fr; } .convert-center{ order:-1; min-height:auto; padding:8px 0; } }

  .pane-toolbar{
    background:var(--pane-toolbar);
    border:1px solid var(--pane-border);
    border-bottom:none; border-radius:12px 12px 0 0;
    padding:8px; display:flex; gap:8px; align-items:center;
  }
  .toolbar-right{ margin-left:auto; }
  .editor-shell{
    border:1px solid var(--pane-border);
    border-top:none; border-radius:0 0 12px 12px;
    overflow:hidden; background:var(--pane-bg);
  }
  .ace-wrap{ position:relative; height:560px; width:100%; }
  .ace_editor .ace_marker-layer .ace_active-line{ background:var(--line-active) !important; }

  /* ===== UNIFIED TOOLBAR BUTTONS (white inside) ===== */
  /* apply to ALL toolbar buttons, including .ghost, so sizes match */
  .pane-toolbar .btn,
  .pane-toolbar .btn.ghost{
    background:#ffffff;           /* white interior in both themes */
    color:#0f1420;
    border:1px solid var(--pane-border);
    height:44px;                  /* uniform height */
    padding:0 18px;               /* uniform padding */
    min-width:50px;              /* uniform width feel */
    border-radius:12px;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    gap:8px;
    font-weight:700;
    box-shadow:0 2px 6px rgba(0,0,0,.05);
  }
  html[data-theme="dark"] .pane-toolbar .btn,
  html[data-theme="dark"] .pane-toolbar .btn.ghost{
    background:#0f1420;           /* keep white even in dark */
    color:#ffffff;
    box-shadow:0 2px 6px rgba(0,0,0,.12);
  }
  .pane-toolbar .btn:hover{ filter:brightness(0.98); }
  .pane-toolbar .btn:active{ transform:translateY(1px); }

  /* Center rail (keeps gradient) */
  .cta{
    display:grid; place-items:center; width:210px; height:64px; border-radius:16px;
    background:var(--btn-gradient); color:var(--btn-text); font-weight:800; border:none; cursor:pointer;
    box-shadow:0 8px 28px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.12);
  }
  
.rail-links{
  display:grid; gap:14px; justify-items:center;
}

/* same sizing & look as .mode-btn */
.rail-link{
  width:215px; height:64px; border-radius:16px;
  display:grid; place-items:center;
  font-weight:800; text-decoration:none; cursor:pointer;
  border:1px solid var(--pane-border);
  background:#fff; color:inherit;
  box-shadow:0 6px 18px rgba(0,0,0,.06);
  transition:transform .08s ease, box-shadow .12s ease, filter .12s ease;
}
html[data-theme="dark"] .rail-link{ background:#1e2430; color:#e6edf3; }

/* active = gradient in both light & dark */
.rail-link.active{
  background:var(--btn-gradient) !important;
  color:var(--btn-text) !important;
  border:none;
  box-shadow:0 8px 28px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.12);
}

</style>

</head>
<body>
  <!-- ===== Header (same as site) ===== -->
  <header class="topbar">
    <div class="brand">
  <a href="index.html" class="brand-link" aria-label="JSON Studio Lite">
    <img src="../assets/icons/jsl-logo.svg" alt="JSON Studio Lite" class="brand-logo">
  </a>
</div>
    <nav class="tabs" aria-label="Primary">
      <a class="tab active" href="json-format-viewer.html" aria-current="page">View</a>
      <a class="tab" href="../index.html">Convert</a>
      <a class="tab" href="../json-diff-checker.html">Difference</a>
      <a class="tab" href="../samples.html">Samples</a>
    </nav>
    <div class="actions">
      <button id="themeToggle" class="btn ghost" title="Toggle theme" aria-label="Toggle theme">‚òæ</button>
    </div>
  </header>

  <!-- ===== Main: two editors + center rail ===== -->
  <main class="convert-grid">
    <!-- Left -->
    <section class="pane">
      <header class="pane-toolbar">
        <label class="btn" for="fileL">
          <input id="fileL" type="file" accept=".json,.txt,application/json" hidden>
          ‚§¥ Upload
        </label>
        <button id="downL" class="btn">‚¨á Download</button>
        <button id="histL" class="btn ghost">üïò History</button>
        <button id="copyL" class="btn ghost">üìã Copy</button>
        <button id="otherL" class="btn ghost">‚ãØ Others</button>
        <button id="saveL" class="btn ghost">üíæ Save</button>
        <div class="toolbar-right">
          <button id="fsL" class="btn ghost" title="Fullscreen">‚§¢</button>
        </div>
      </header>
      <div class="editor-shell"><div id="edL" class="ace-wrap"></div></div>
    </section>

    <!-- Center rail -->
<aside class="convert-center">
  <!-- primary CTA for the format page -->
  <button id="doFormat" class="cta">{ } Format</button>

  <!-- view switcher -->
  <div class="rail-links">
    <a class="rail-link" href="json-crack-viewer.html">Crack View</a>
    <a class="rail-link" href="json-db-viewer.html">DB View</a>
    <a class="rail-link" href="json-grid-viewer.html">Grid View</a>
  </div>

  <div id="status" class="status">Paste JSON at left, then press ‚ÄúFormat‚Äù.</div>
</aside>

    <!-- Right -->
    <section class="pane">
      <header class="pane-toolbar">
        <button id="downR" class="btn">‚¨á Download</button>
        <button id="shareR" class="btn ghost">üîó Share</button>
        <button id="copyR" class="btn ghost">üìã Copy</button>
        <div class="toolbar-right">
          <button id="fsR" class="btn ghost" title="Fullscreen">‚§¢</button>
        </div>
      </header>
      <div class="editor-shell"><div id="edR" class="ace-wrap"></div></div>
    </section>
  </main>

  <!-- ===== Feedback (same as site) ===== -->
  <section class="feedback-section" id="feedback">
    <h2>üí¨ We value your Feedback</h2>
    <form id="feedbackForm" class="feedback-form">
      <div class="field"><input type="text" id="fbName" required><label for="fbName">Your Name</label></div>
      <div class="field"><input type="email" id="fbEmail" required><label for="fbEmail">Your Email</label></div>
      <div class="field"><textarea id="fbMessage" rows="4" required></textarea><label for="fbMessage">Your Message</label></div>
      <button type="submit" class="btn gradient">Submit</button>
    </form>
  </section>

  <!-- ===== Footer (same as site) ===== -->
  <footer class="site-footer">
    <div class="footer-container">
      <div class="footer-left">
        <h3>‚ö° JSON Studio Lite</h3>
        <p>Simple, fast, offline-ready JSON tools. Built with ‚ù§Ô∏è for developers.</p>
      </div>
      <div class="footer-center">
        <h4>Quick Links</h4>
        <ul>
          <li><a href="json-format-viewer.html">View</a></li>
          <li><a href="../index.html">Convert</a></li>
          <li><a href="../json-diff-checker.html">Difference</a></li>
          <li><a href="../samples.html">Samples</a></li>
        </ul>
      </div>
      <div class="footer-right">
        <h4>Connect</h4>
        <div class="social">
          <a aria-label="Twitter" href="#"><img src="../assets/icons/twitter.svg" alt="Twitter"></a>
          <a aria-label="LinkedIn" href="#"><img src="../assets/icons/linkedin.svg" alt="LinkedIn"></a>
          <a aria-label="GitHub" href="#"><img src="../assets/icons/github.svg" alt="GitHub"></a>
        </div>
      </div>
    </div>
    <div class="footer-bottom"><p>¬© <span id="year"></span> JSON Studio Lite.</p></div>
  </footer>

  <!-- ===== Ace ===== -->
  <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.9/src-min-noconflict/ace.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.9/src-min-noconflict/ext-language_tools.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.9/src-min-noconflict/mode-json.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.9/src-min-noconflict/mode-text.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.9/src-min-noconflict/theme-textmate.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.9/src-min-noconflict/theme-monokai.js"></script>

  <script>
    // Year + theme sync
    const y = document.getElementById('year'); if (y) y.textContent = new Date().getFullYear();
    const root = document.documentElement;
    const aceTheme = () => root.getAttribute('data-theme') === 'dark' ? "ace/theme/monokai" : "ace/theme/textmate";
    document.getElementById('themeToggle')?.addEventListener('click', ()=>{
      root.setAttribute('data-theme', root.getAttribute('data-theme')==='light'?'dark':'light');
      [edL, edR].forEach(ed => ed.setTheme(aceTheme()));
    });

    // Editors
    function mk(id, mode="ace/mode/json", readOnly=false){
      const ed = ace.edit(id);
      ed.session.setMode(mode);
      ed.setTheme(aceTheme());
      ed.setOptions({
        readOnly,
        showGutter:true,
        highlightActiveLine:true,
        showPrintMargin:true,
        printMargin:100,
        fontSize:"14px",
        tabSize:2,
        useSoftTabs:true,
        wrap:false
      });
      return ed;
    }
    const edL = mk("edL", "ace/mode/json");
    const edR = mk("edR", "ace/mode/json", true);

    const statusEl = document.getElementById('status');

    // Actions
    function pretty(obj){ return JSON.stringify(obj, null, 2); }
    function safeParse(s){ try { return JSON.parse(s); } catch { return null; } }

    document.getElementById('doFormat').addEventListener('click', ()=>{
      const obj = safeParse(edL.getValue().trim());
      if(!obj){ statusEl.textContent = "‚ùó Please paste valid JSON on the left."; return; }
      edR.setReadOnly(false);
      edR.setValue(pretty(obj), -1);
      edR.setReadOnly(true);
      statusEl.textContent = "Formatted ‚úî";
    });

    // Left toolbar
    document.getElementById('fileL').addEventListener('change', e=>{
      const f=e.target.files?.[0]; if(!f) return;
      const r=new FileReader(); r.onload=()=> edL.setValue(String(r.result||""), -1); r.readAsText(f);
    });
    document.getElementById('downL').onclick = ()=>{
      const blob = new Blob([edL.getValue()||""], {type:"application/json"});
      const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download="input.json"; a.click(); URL.revokeObjectURL(a.href);
    };
    document.getElementById('histL').onclick  = ()=> alert("üïò History coming soon.");
    document.getElementById('copyL').onclick  = ()=> navigator.clipboard.writeText(edL.getValue()||"");
    document.getElementById('otherL').onclick = ()=> alert("‚ãØ Other tools coming soon.");
    document.getElementById('saveL').onclick  = ()=> {
      const a=document.createElement('a');
      a.href='data:application/json;charset=utf-8,'+encodeURIComponent(edL.getValue()||"");
      a.download='left.json'; a.click();
    };
    document.getElementById('fsL').onclick    = ()=> document.getElementById('edL').requestFullscreen?.();

    // Right toolbar
    document.getElementById('downR').onclick = ()=>{
      const blob = new Blob([edR.getValue()||""], {type:"application/json"});
      const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download="formatted.json"; a.click(); URL.revokeObjectURL(a.href);
    };
    document.getElementById('copyR').onclick = ()=> navigator.clipboard.writeText(edR.getValue()||"");
    document.getElementById('shareR').onclick = ()=>{
      const txt = edR.getValue() || "";
      navigator.clipboard.writeText(txt).then(()=> alert("üîó JSON copied to clipboard."));
    };
    document.getElementById('fsR').onclick   = ()=> document.getElementById('edR').requestFullscreen?.();

    // Feedback
    document.getElementById('feedbackForm')?.addEventListener('submit',(e)=>{
      e.preventDefault(); alert('‚úÖ Thanks for your feedback!'); e.target.reset();
    });
  </script>
</body>
</html>
